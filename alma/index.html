<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<title>Alma játék mentéssel</title>

<style>
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#e8f5e9;
  font-family:sans-serif;
  overflow:hidden;
}

#game{
  position:relative;
  width:400px;
  height:400px;
}

.apple{
  position:absolute;
  width:140px;
  height:140px;
  background:radial-gradient(circle at 35% 30%, #ff8a80, #b71c1c);
  border-radius:50% 50% 45% 45%;
  box-shadow: inset -15px -20px 30px rgba(0,0,0,0.4);
  cursor:pointer;
  transition:transform .2s, opacity .3s;
}

.apple::before{
  content:"";
  position:absolute;
  width:12px;
  height:40px;
  background:#5d4037;
  top:-30px;
  left:64px;
  border-radius:5px;
}

.leaf{
  position:absolute;
  width:60px;
  height:30px;
  background:#2e7d32;
  border-radius:50%;
  top:-20px;
  left:80px;
  transform:rotate(-35deg);
}

.bite1{ clip-path:circle(70% at 50% 50%); }
.bite2{ clip-path:circle(60% at 55% 55%); }
.bite3{ clip-path:circle(45% at 60% 60%); }
.gone{ opacity:0; transform:scale(0); }

#score{
  position:absolute;
  top:10px;
  left:10px;
  font-size:20px;
  font-weight:bold;
}
</style>
</head>

<body>

<div id="game">
  <div id="score"></div>
</div>

<script>
const game = document.getElementById("game");
const scoreText = document.getElementById("score");

// ====== MENTÉS BETÖLTÉS ======
let score = localStorage.getItem("almaScore");

if(score === null){
  score = 0;
}else{
  score = parseInt(score);
}

scoreText.textContent = "Megevett almák száma: " + score;

// ====== ALMA SPAWN ======
function spawnApple(){

  let apple = document.createElement("div");
  apple.className = "apple bite1";

  apple.style.left = Math.random()*260 + "px";
  apple.style.top = Math.random()*260 + "px";

  let leaf = document.createElement("div");
  leaf.className = "leaf";
  apple.appendChild(leaf);

  let bites = 0;

  apple.onclick = () => {
    bites++;
    apple.classList.remove("bite1","bite2","bite3");

    if(bites===1) apple.classList.add("bite2");
    else if(bites===2) apple.classList.add("bite3");
    else{
      apple.classList.add("gone");
      score++;

      // ===== MENTÉS =====
      localStorage.setItem("almaScore", score);

      scoreText.textContent = "Almák megevve: " + score;

      setTimeout(()=>{
        apple.remove();
        spawnApple();
      },300);
    }
  };

  game.appendChild(apple);
}

spawnApple();
</script>

</body>
</html>
